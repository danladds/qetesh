/* HTTPRequest.c generated by valac 0.22.1, the Vala compiler
 * generated from HTTPRequest.vala, do not modify */

/*
 * HTTPRequest.vala
 * 
 * Copyright 2014 Dan Ladds <Dan@el-topo.co.uk>
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
 * MA 02110-1301, USA.
 * 
 * 
 */

#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>


#define QETESH_TYPE_HTTP_REQUEST (qetesh_http_request_get_type ())
#define QETESH_HTTP_REQUEST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequest))
#define QETESH_HTTP_REQUEST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequestClass))
#define QETESH_IS_HTTP_REQUEST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_HTTP_REQUEST))
#define QETESH_IS_HTTP_REQUEST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_HTTP_REQUEST))
#define QETESH_HTTP_REQUEST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequestClass))

typedef struct _QeteshHTTPRequest QeteshHTTPRequest;
typedef struct _QeteshHTTPRequestClass QeteshHTTPRequestClass;
typedef struct _QeteshHTTPRequestPrivate QeteshHTTPRequestPrivate;

#define QETESH_TYPE_WEB_SERVER_CONTEXT (qetesh_web_server_context_get_type ())
#define QETESH_WEB_SERVER_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_WEB_SERVER_CONTEXT, QeteshWebServerContext))
#define QETESH_WEB_SERVER_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_WEB_SERVER_CONTEXT, QeteshWebServerContextClass))
#define QETESH_IS_WEB_SERVER_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_WEB_SERVER_CONTEXT))
#define QETESH_IS_WEB_SERVER_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_WEB_SERVER_CONTEXT))
#define QETESH_WEB_SERVER_CONTEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_WEB_SERVER_CONTEXT, QeteshWebServerContextClass))

typedef struct _QeteshWebServerContext QeteshWebServerContext;
typedef struct _QeteshWebServerContextClass QeteshWebServerContextClass;

#define QETESH_TYPE_WEB_APP_CONTEXT (qetesh_web_app_context_get_type ())
#define QETESH_WEB_APP_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_WEB_APP_CONTEXT, QeteshWebAppContext))
#define QETESH_WEB_APP_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_WEB_APP_CONTEXT, QeteshWebAppContextClass))
#define QETESH_IS_WEB_APP_CONTEXT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_WEB_APP_CONTEXT))
#define QETESH_IS_WEB_APP_CONTEXT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_WEB_APP_CONTEXT))
#define QETESH_WEB_APP_CONTEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_WEB_APP_CONTEXT, QeteshWebAppContextClass))

typedef struct _QeteshWebAppContext QeteshWebAppContext;
typedef struct _QeteshWebAppContextClass QeteshWebAppContextClass;

#define QETESH_DATA_TYPE_DATA_MANAGER (qetesh_data_data_manager_get_type ())
#define QETESH_DATA_DATA_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_DATA_TYPE_DATA_MANAGER, QeteshDataDataManager))
#define QETESH_DATA_DATA_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_DATA_TYPE_DATA_MANAGER, QeteshDataDataManagerClass))
#define QETESH_DATA_IS_DATA_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_DATA_TYPE_DATA_MANAGER))
#define QETESH_DATA_IS_DATA_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_DATA_TYPE_DATA_MANAGER))
#define QETESH_DATA_DATA_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_DATA_TYPE_DATA_MANAGER, QeteshDataDataManagerClass))

typedef struct _QeteshDataDataManager QeteshDataDataManager;
typedef struct _QeteshDataDataManagerClass QeteshDataDataManagerClass;

#define QETESH_HTTP_REQUEST_TYPE_REQUEST_METHOD (qetesh_http_request_request_method_get_type ())

#define QETESH_TYPE_HTTP_RESPONSE (qetesh_http_response_get_type ())
#define QETESH_HTTP_RESPONSE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_HTTP_RESPONSE, QeteshHTTPResponse))
#define QETESH_HTTP_RESPONSE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_HTTP_RESPONSE, QeteshHTTPResponseClass))
#define QETESH_IS_HTTP_RESPONSE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_HTTP_RESPONSE))
#define QETESH_IS_HTTP_RESPONSE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_HTTP_RESPONSE))
#define QETESH_HTTP_RESPONSE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_HTTP_RESPONSE, QeteshHTTPResponseClass))

typedef struct _QeteshHTTPResponse QeteshHTTPResponse;
typedef struct _QeteshHTTPResponseClass QeteshHTTPResponseClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _QeteshWebServerContextPrivate QeteshWebServerContextPrivate;

#define QETESH_TYPE_ERROR_MANAGER (qetesh_error_manager_get_type ())
#define QETESH_ERROR_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_ERROR_MANAGER, QeteshErrorManager))
#define QETESH_ERROR_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_ERROR_MANAGER, QeteshErrorManagerClass))
#define QETESH_IS_ERROR_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_ERROR_MANAGER))
#define QETESH_IS_ERROR_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_ERROR_MANAGER))
#define QETESH_ERROR_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_ERROR_MANAGER, QeteshErrorManagerClass))

typedef struct _QeteshErrorManager QeteshErrorManager;
typedef struct _QeteshErrorManagerClass QeteshErrorManagerClass;

#define QETESH_DATA_TYPE_DB_MANAGER (qetesh_data_db_manager_get_type ())
#define QETESH_DATA_DB_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_DATA_TYPE_DB_MANAGER, QeteshDataDBManager))
#define QETESH_DATA_DB_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_DATA_TYPE_DB_MANAGER, QeteshDataDBManagerClass))
#define QETESH_DATA_IS_DB_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_DATA_TYPE_DB_MANAGER))
#define QETESH_DATA_IS_DB_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_DATA_TYPE_DB_MANAGER))
#define QETESH_DATA_DB_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_DATA_TYPE_DB_MANAGER, QeteshDataDBManagerClass))

typedef struct _QeteshDataDBManager QeteshDataDBManager;
typedef struct _QeteshDataDBManagerClass QeteshDataDBManagerClass;

#define QETESH_TYPE_MODULE_MANAGER (qetesh_module_manager_get_type ())
#define QETESH_MODULE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_MODULE_MANAGER, QeteshModuleManager))
#define QETESH_MODULE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_MODULE_MANAGER, QeteshModuleManagerClass))
#define QETESH_IS_MODULE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_MODULE_MANAGER))
#define QETESH_IS_MODULE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_MODULE_MANAGER))
#define QETESH_MODULE_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_MODULE_MANAGER, QeteshModuleManagerClass))

typedef struct _QeteshModuleManager QeteshModuleManager;
typedef struct _QeteshModuleManagerClass QeteshModuleManagerClass;

#define QETESH_TYPE_CONFIG_FILE (qetesh_config_file_get_type ())
#define QETESH_CONFIG_FILE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QETESH_TYPE_CONFIG_FILE, QeteshConfigFile))
#define QETESH_CONFIG_FILE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QETESH_TYPE_CONFIG_FILE, QeteshConfigFileClass))
#define QETESH_IS_CONFIG_FILE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QETESH_TYPE_CONFIG_FILE))
#define QETESH_IS_CONFIG_FILE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QETESH_TYPE_CONFIG_FILE))
#define QETESH_CONFIG_FILE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QETESH_TYPE_CONFIG_FILE, QeteshConfigFileClass))

typedef struct _QeteshConfigFile QeteshConfigFile;
typedef struct _QeteshConfigFileClass QeteshConfigFileClass;

#define QETESH_ERROR_MANAGER_TYPE_QERROR_CLASS (qetesh_error_manager_qerror_class_get_type ())
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

struct _QeteshHTTPRequest {
	GObject parent_instance;
	QeteshHTTPRequestPrivate * priv;
};

struct _QeteshHTTPRequestClass {
	GObjectClass parent_class;
};

typedef enum  {
	QETESH_HTTP_REQUEST_REQUEST_METHOD_GET,
	QETESH_HTTP_REQUEST_REQUEST_METHOD_POST,
	QETESH_HTTP_REQUEST_REQUEST_METHOD_PUT,
	QETESH_HTTP_REQUEST_REQUEST_METHOD_HEAD,
	QETESH_HTTP_REQUEST_REQUEST_METHOD_INVALID
} QeteshHTTPRequestRequestMethod;

struct _QeteshHTTPRequestPrivate {
	GSocketConnection* conn;
	GDataInputStream* httpIn;
	GDataOutputStream* httpOut;
	QeteshWebServerContext* _ServerContext;
	QeteshWebAppContext* _AppContext;
	QeteshDataDataManager* _Data;
	QeteshHTTPRequestRequestMethod _Method;
	gchar* _FullPath;
	gchar* _Path;
	guint16 _ServerRequestPort;
	guint16 _RequestPort;
	gchar* _Host;
	gchar* _UserAgent;
	GeeMap* _Headers;
	QeteshHTTPResponse* _HResponse;
};

struct _QeteshWebServerContext {
	GObject parent_instance;
	QeteshWebServerContextPrivate * priv;
	QeteshErrorManager* Err;
	QeteshDataDBManager* Databases;
	QeteshModuleManager* Modules;
	QeteshConfigFile* Configuration;
};

struct _QeteshWebServerContextClass {
	GObjectClass parent_class;
};

typedef enum  {
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_ERROR,
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_CRITICAL,
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_DEBUG,
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_WARNING,
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_BEST_PRACTICE,
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_INTERNAL,
	QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_INTERNAL_DEV,
	QETESH_ERROR_MANAGER_QERROR_CLASS_MODULE_ERROR,
	QETESH_ERROR_MANAGER_QERROR_CLASS_MODULE_CRITICAL,
	QETESH_ERROR_MANAGER_QERROR_CLASS_MODULE_DEBUG,
	QETESH_ERROR_MANAGER_QERROR_CLASS_MODULE_WARNING
} QeteshErrorManagerQErrorClass;


static gpointer qetesh_http_request_parent_class = NULL;

GType qetesh_http_request_get_type (void) G_GNUC_CONST;
GType qetesh_web_server_context_get_type (void) G_GNUC_CONST;
GType qetesh_web_app_context_get_type (void) G_GNUC_CONST;
GType qetesh_data_data_manager_get_type (void) G_GNUC_CONST;
GType qetesh_http_request_request_method_get_type (void) G_GNUC_CONST;
GType qetesh_http_response_get_type (void) G_GNUC_CONST;
#define QETESH_HTTP_REQUEST_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequestPrivate))
enum  {
	QETESH_HTTP_REQUEST_DUMMY_PROPERTY,
	QETESH_HTTP_REQUEST_SERVER_CONTEXT,
	QETESH_HTTP_REQUEST_APP_CONTEXT,
	QETESH_HTTP_REQUEST_DATA,
	QETESH_HTTP_REQUEST_METHOD,
	QETESH_HTTP_REQUEST_FULL_PATH,
	QETESH_HTTP_REQUEST_PATH,
	QETESH_HTTP_REQUEST_HOST,
	QETESH_HTTP_REQUEST_USER_AGENT,
	QETESH_HTTP_REQUEST_HEADERS,
	QETESH_HTTP_REQUEST_HRESPONSE
};
QeteshHTTPRequest* qetesh_http_request_new (GSocketConnection* c, QeteshWebServerContext* sc);
QeteshHTTPRequest* qetesh_http_request_construct (GType object_type, GSocketConnection* c, QeteshWebServerContext* sc);
static void qetesh_http_request_set_ServerContext (QeteshHTTPRequest* self, QeteshWebServerContext* value);
static void qetesh_http_request_ReadHeaders (QeteshHTTPRequest* self, GeeArrayList* headers);
QeteshWebServerContext* qetesh_http_request_get_ServerContext (QeteshHTTPRequest* self);
GType qetesh_error_manager_get_type (void) G_GNUC_CONST;
GType qetesh_data_db_manager_get_type (void) G_GNUC_CONST;
GType qetesh_module_manager_get_type (void) G_GNUC_CONST;
GType qetesh_config_file_get_type (void) G_GNUC_CONST;
GType qetesh_error_manager_qerror_class_get_type (void) G_GNUC_CONST;
void qetesh_error_manager_WriteMessage (QeteshErrorManager* self, const gchar* message, QeteshErrorManagerQErrorClass errorClass, const gchar* modName);
guint16 qetesh_config_file_get_ListenPort (QeteshConfigFile* self);
void qetesh_http_request_set_ServerRequestPort (QeteshHTTPRequest* self, guint16 value);
static void qetesh_http_request_set_Headers (QeteshHTTPRequest* self, GeeMap* value);
static void qetesh_http_request_set_Method (QeteshHTTPRequest* self, QeteshHTTPRequestRequestMethod value);
static void qetesh_http_request_set_FullPath (QeteshHTTPRequest* self, const gchar* value);
const gchar* qetesh_http_request_get_FullPath (QeteshHTTPRequest* self);
static void qetesh_http_request_set_Path (QeteshHTTPRequest* self, const gchar* value);
GeeMap* qetesh_http_request_get_Headers (QeteshHTTPRequest* self);
static void qetesh_http_request_set_Host (QeteshHTTPRequest* self, const gchar* value);
static void qetesh_http_request_set_RequestPort (QeteshHTTPRequest* self, guint16 value);
static void qetesh_http_request_set_UserAgent (QeteshHTTPRequest* self, const gchar* value);
void qetesh_http_request_Handle (QeteshHTTPRequest* self);
void qetesh_http_request_Route (QeteshHTTPRequest* self, QeteshWebAppContext* cxt, QeteshHTTPResponse* resp);
static void qetesh_http_request_set_AppContext (QeteshHTTPRequest* self, QeteshWebAppContext* value);
static void qetesh_http_request_set_HResponse (QeteshHTTPRequest* self, QeteshHTTPResponse* value);
QeteshDataDataManager* qetesh_data_data_manager_new (QeteshDataDBManager* dbm);
QeteshDataDataManager* qetesh_data_data_manager_construct (GType object_type, QeteshDataDBManager* dbm);
static void qetesh_http_request_set_Data (QeteshHTTPRequest* self, QeteshDataDataManager* value);
void qetesh_http_request_Respond (QeteshHTTPRequest* self);
QeteshHTTPResponse* qetesh_http_request_get_HResponse (QeteshHTTPRequest* self);
void qetesh_http_response_Respond (QeteshHTTPResponse* self, GDataOutputStream* httpOut);
QeteshWebAppContext* qetesh_http_request_get_AppContext (QeteshHTTPRequest* self);
QeteshDataDataManager* qetesh_http_request_get_Data (QeteshHTTPRequest* self);
QeteshHTTPRequestRequestMethod qetesh_http_request_get_Method (QeteshHTTPRequest* self);
const gchar* qetesh_http_request_get_Path (QeteshHTTPRequest* self);
guint16 qetesh_http_request_get_ServerRequestPort (QeteshHTTPRequest* self);
guint16 qetesh_http_request_get_RequestPort (QeteshHTTPRequest* self);
const gchar* qetesh_http_request_get_Host (QeteshHTTPRequest* self);
const gchar* qetesh_http_request_get_UserAgent (QeteshHTTPRequest* self);
static void qetesh_http_request_finalize (GObject* obj);
static void _vala_qetesh_http_request_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_qetesh_http_request_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


GType qetesh_http_request_request_method_get_type (void) {
	static volatile gsize qetesh_http_request_request_method_type_id__volatile = 0;
	if (g_once_init_enter (&qetesh_http_request_request_method_type_id__volatile)) {
		static const GEnumValue values[] = {{QETESH_HTTP_REQUEST_REQUEST_METHOD_GET, "QETESH_HTTP_REQUEST_REQUEST_METHOD_GET", "get"}, {QETESH_HTTP_REQUEST_REQUEST_METHOD_POST, "QETESH_HTTP_REQUEST_REQUEST_METHOD_POST", "post"}, {QETESH_HTTP_REQUEST_REQUEST_METHOD_PUT, "QETESH_HTTP_REQUEST_REQUEST_METHOD_PUT", "put"}, {QETESH_HTTP_REQUEST_REQUEST_METHOD_HEAD, "QETESH_HTTP_REQUEST_REQUEST_METHOD_HEAD", "head"}, {QETESH_HTTP_REQUEST_REQUEST_METHOD_INVALID, "QETESH_HTTP_REQUEST_REQUEST_METHOD_INVALID", "invalid"}, {0, NULL, NULL}};
		GType qetesh_http_request_request_method_type_id;
		qetesh_http_request_request_method_type_id = g_enum_register_static ("QeteshHTTPRequestRequestMethod", values);
		g_once_init_leave (&qetesh_http_request_request_method_type_id__volatile, qetesh_http_request_request_method_type_id);
	}
	return qetesh_http_request_request_method_type_id__volatile;
}


/**
 * Recieve a new request
 * 
 * @param c Socket with incoming request data
 * @param sc Populated context from server
 * 
**/
static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


QeteshHTTPRequest* qetesh_http_request_construct (GType object_type, GSocketConnection* c, QeteshWebServerContext* sc) {
	QeteshHTTPRequest * self = NULL;
	GSocketConnection* _tmp0_ = NULL;
	GSocketConnection* _tmp1_ = NULL;
	QeteshWebServerContext* _tmp2_ = NULL;
	GSocketConnection* _tmp3_ = NULL;
	GInputStream* _tmp4_ = NULL;
	GInputStream* _tmp5_ = NULL;
	GDataInputStream* _tmp6_ = NULL;
	GSocketConnection* _tmp7_ = NULL;
	GOutputStream* _tmp8_ = NULL;
	GOutputStream* _tmp9_ = NULL;
	GDataOutputStream* _tmp10_ = NULL;
	g_return_val_if_fail (c != NULL, NULL);
	g_return_val_if_fail (sc != NULL, NULL);
	self = (QeteshHTTPRequest*) g_object_new (object_type, NULL);
	_tmp0_ = c;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->conn);
	self->priv->conn = _tmp1_;
	_tmp2_ = sc;
	qetesh_http_request_set_ServerContext (self, _tmp2_);
	_tmp3_ = c;
	_tmp4_ = g_io_stream_get_input_stream ((GIOStream*) _tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = g_data_input_stream_new (_tmp5_);
	_g_object_unref0 (self->priv->httpIn);
	self->priv->httpIn = _tmp6_;
	_tmp7_ = c;
	_tmp8_ = g_io_stream_get_output_stream ((GIOStream*) _tmp7_);
	_tmp9_ = _tmp8_;
	_tmp10_ = g_data_output_stream_new (_tmp9_);
	_g_object_unref0 (self->priv->httpOut);
	self->priv->httpOut = _tmp10_;
	return self;
}


QeteshHTTPRequest* qetesh_http_request_new (GSocketConnection* c, QeteshWebServerContext* sc) {
	return qetesh_http_request_construct (QETESH_TYPE_HTTP_REQUEST, c, sc);
}


/**
 * Read headers into self
 * 
 *  @param headers Header text lines
**/
static void qetesh_http_request_ReadHeaders (QeteshHTTPRequest* self, GeeArrayList* headers) {
	QeteshWebServerContext* _tmp0_ = NULL;
	QeteshErrorManager* _tmp1_ = NULL;
	QeteshWebServerContext* _tmp2_ = NULL;
	QeteshConfigFile* _tmp3_ = NULL;
	guint16 _tmp4_ = 0U;
	guint16 _tmp5_ = 0U;
	GeeHashMap* _tmp6_ = NULL;
	GeeHashMap* _tmp7_ = NULL;
	gchar* firstLine = NULL;
	GeeArrayList* _tmp8_ = NULL;
	gpointer _tmp9_ = NULL;
	gchar** parts = NULL;
	const gchar* _tmp10_ = NULL;
	gchar** _tmp11_ = NULL;
	gchar** _tmp12_ = NULL;
	gint parts_length1 = 0;
	gint _parts_size_ = 0;
	gchar** _tmp13_ = NULL;
	gint _tmp13__length1 = 0;
	const gchar* _tmp14_ = NULL;
	const gchar* _tmp15_ = NULL;
	GQuark _tmp17_ = 0U;
	static GQuark _tmp16_label0 = 0;
	static GQuark _tmp16_label1 = 0;
	static GQuark _tmp16_label2 = 0;
	static GQuark _tmp16_label3 = 0;
	gchar** _tmp18_ = NULL;
	gint _tmp18__length1 = 0;
	const gchar* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	QeteshWebServerContext* _tmp55_ = NULL;
	QeteshErrorManager* _tmp56_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (headers != NULL);
	_tmp0_ = self->priv->_ServerContext;
	_tmp1_ = _tmp0_->Err;
	qetesh_error_manager_WriteMessage (_tmp1_, "Processing header lines...", QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_DEBUG, NULL);
	_tmp2_ = self->priv->_ServerContext;
	_tmp3_ = _tmp2_->Configuration;
	_tmp4_ = qetesh_config_file_get_ListenPort (_tmp3_);
	_tmp5_ = _tmp4_;
	qetesh_http_request_set_ServerRequestPort (self, _tmp5_);
	_tmp6_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	_tmp7_ = _tmp6_;
	qetesh_http_request_set_Headers (self, (GeeMap*) _tmp7_);
	_g_object_unref0 (_tmp7_);
	_tmp8_ = headers;
	_tmp9_ = gee_abstract_list_get ((GeeAbstractList*) _tmp8_, 0);
	firstLine = (gchar*) _tmp9_;
	_tmp10_ = firstLine;
	_tmp12_ = _tmp11_ = g_strsplit (_tmp10_, " ", 3);
	parts = _tmp12_;
	parts_length1 = _vala_array_length (_tmp11_);
	_parts_size_ = parts_length1;
	_tmp13_ = parts;
	_tmp13__length1 = parts_length1;
	_tmp14_ = _tmp13_[0];
	_tmp15_ = _tmp14_;
	_tmp17_ = (NULL == _tmp15_) ? 0 : g_quark_from_string (_tmp15_);
	if (_tmp17_ == ((0 != _tmp16_label0) ? _tmp16_label0 : (_tmp16_label0 = g_quark_from_static_string ("GET")))) {
		switch (0) {
			default:
			{
				qetesh_http_request_set_Method (self, QETESH_HTTP_REQUEST_REQUEST_METHOD_GET);
				break;
			}
		}
	} else if (_tmp17_ == ((0 != _tmp16_label1) ? _tmp16_label1 : (_tmp16_label1 = g_quark_from_static_string ("POST")))) {
		switch (0) {
			default:
			{
				qetesh_http_request_set_Method (self, QETESH_HTTP_REQUEST_REQUEST_METHOD_POST);
				break;
			}
		}
	} else if (_tmp17_ == ((0 != _tmp16_label2) ? _tmp16_label2 : (_tmp16_label2 = g_quark_from_static_string ("PUT")))) {
		switch (0) {
			default:
			{
				qetesh_http_request_set_Method (self, QETESH_HTTP_REQUEST_REQUEST_METHOD_PUT);
				break;
			}
		}
	} else if (_tmp17_ == ((0 != _tmp16_label3) ? _tmp16_label3 : (_tmp16_label3 = g_quark_from_static_string ("HEAD")))) {
		switch (0) {
			default:
			{
				qetesh_http_request_set_Method (self, QETESH_HTTP_REQUEST_REQUEST_METHOD_HEAD);
				break;
			}
		}
	} else {
		switch (0) {
			default:
			{
				qetesh_http_request_set_Method (self, QETESH_HTTP_REQUEST_REQUEST_METHOD_INVALID);
				break;
			}
		}
	}
	_tmp18_ = parts;
	_tmp18__length1 = parts_length1;
	_tmp19_ = _tmp18_[1];
	qetesh_http_request_set_FullPath (self, _tmp19_);
	_tmp20_ = self->priv->_FullPath;
	qetesh_http_request_set_Path (self, _tmp20_);
	{
		gint _i = 0;
		_i = 1;
		{
			gboolean _tmp21_ = FALSE;
			_tmp21_ = TRUE;
			while (TRUE) {
				gboolean _tmp22_ = FALSE;
				gint _tmp24_ = 0;
				GeeArrayList* _tmp25_ = NULL;
				gint _tmp26_ = 0;
				gint _tmp27_ = 0;
				gchar* line = NULL;
				GeeArrayList* _tmp28_ = NULL;
				gint _tmp29_ = 0;
				gpointer _tmp30_ = NULL;
				gchar** lineparts = NULL;
				const gchar* _tmp31_ = NULL;
				gchar** _tmp32_ = NULL;
				gchar** _tmp33_ = NULL;
				gint lineparts_length1 = 0;
				gint _lineparts_size_ = 0;
				GeeMap* _tmp34_ = NULL;
				gchar** _tmp35_ = NULL;
				gint _tmp35__length1 = 0;
				const gchar* _tmp36_ = NULL;
				gchar** _tmp37_ = NULL;
				gint _tmp37__length1 = 0;
				const gchar* _tmp38_ = NULL;
				gchar** _tmp39_ = NULL;
				gint _tmp39__length1 = 0;
				const gchar* _tmp40_ = NULL;
				gchar** _tmp51_ = NULL;
				gint _tmp51__length1 = 0;
				const gchar* _tmp52_ = NULL;
				_tmp22_ = _tmp21_;
				if (!_tmp22_) {
					gint _tmp23_ = 0;
					_tmp23_ = _i;
					_i = _tmp23_ + 1;
				}
				_tmp21_ = FALSE;
				_tmp24_ = _i;
				_tmp25_ = headers;
				_tmp26_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp25_);
				_tmp27_ = _tmp26_;
				if (!(_tmp24_ < _tmp27_)) {
					break;
				}
				_tmp28_ = headers;
				_tmp29_ = _i;
				_tmp30_ = gee_abstract_list_get ((GeeAbstractList*) _tmp28_, _tmp29_);
				line = (gchar*) _tmp30_;
				_tmp31_ = line;
				_tmp33_ = _tmp32_ = g_strsplit (_tmp31_, ": ", 2);
				lineparts = _tmp33_;
				lineparts_length1 = _vala_array_length (_tmp32_);
				_lineparts_size_ = lineparts_length1;
				_tmp34_ = self->priv->_Headers;
				_tmp35_ = lineparts;
				_tmp35__length1 = lineparts_length1;
				_tmp36_ = _tmp35_[0];
				_tmp37_ = lineparts;
				_tmp37__length1 = lineparts_length1;
				_tmp38_ = _tmp37_[1];
				gee_map_set (_tmp34_, _tmp36_, _tmp38_);
				_tmp39_ = lineparts;
				_tmp39__length1 = lineparts_length1;
				_tmp40_ = _tmp39_[0];
				if (g_strcmp0 (_tmp40_, "Host") == 0) {
					gchar** hostParts = NULL;
					gchar** _tmp41_ = NULL;
					gint _tmp41__length1 = 0;
					const gchar* _tmp42_ = NULL;
					gchar** _tmp43_ = NULL;
					gchar** _tmp44_ = NULL;
					gint hostParts_length1 = 0;
					gint _hostParts_size_ = 0;
					gchar** _tmp45_ = NULL;
					gint _tmp45__length1 = 0;
					const gchar* _tmp46_ = NULL;
					gchar** _tmp47_ = NULL;
					gint _tmp47__length1 = 0;
					_tmp41_ = lineparts;
					_tmp41__length1 = lineparts_length1;
					_tmp42_ = _tmp41_[1];
					_tmp44_ = _tmp43_ = g_strsplit (_tmp42_, ":", 2);
					hostParts = _tmp44_;
					hostParts_length1 = _vala_array_length (_tmp43_);
					_hostParts_size_ = hostParts_length1;
					_tmp45_ = hostParts;
					_tmp45__length1 = hostParts_length1;
					_tmp46_ = _tmp45_[0];
					qetesh_http_request_set_Host (self, _tmp46_);
					_tmp47_ = hostParts;
					_tmp47__length1 = hostParts_length1;
					if (_tmp47__length1 > 1) {
						gchar** _tmp48_ = NULL;
						gint _tmp48__length1 = 0;
						const gchar* _tmp49_ = NULL;
						gint _tmp50_ = 0;
						_tmp48_ = hostParts;
						_tmp48__length1 = hostParts_length1;
						_tmp49_ = _tmp48_[1];
						_tmp50_ = atoi (_tmp49_);
						qetesh_http_request_set_RequestPort (self, (guint16) _tmp50_);
					}
					hostParts = (_vala_array_free (hostParts, hostParts_length1, (GDestroyNotify) g_free), NULL);
				}
				_tmp51_ = lineparts;
				_tmp51__length1 = lineparts_length1;
				_tmp52_ = _tmp51_[0];
				if (g_strcmp0 (_tmp52_, "User-Agent") == 0) {
					gchar** _tmp53_ = NULL;
					gint _tmp53__length1 = 0;
					const gchar* _tmp54_ = NULL;
					_tmp53_ = lineparts;
					_tmp53__length1 = lineparts_length1;
					_tmp54_ = _tmp53_[1];
					qetesh_http_request_set_UserAgent (self, _tmp54_);
				}
				lineparts = (_vala_array_free (lineparts, lineparts_length1, (GDestroyNotify) g_free), NULL);
				_g_free0 (line);
			}
		}
	}
	_tmp55_ = self->priv->_ServerContext;
	_tmp56_ = _tmp55_->Err;
	qetesh_error_manager_WriteMessage (_tmp56_, "Done processing header lines...", QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_DEBUG, NULL);
	parts = (_vala_array_free (parts, parts_length1, (GDestroyNotify) g_free), NULL);
	_g_free0 (firstLine);
}


/**
* Handle the request
* Process request headers and data
**/
static gchar* string_strip (const gchar* self) {
	gchar* result = NULL;
	gchar* _result_ = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup (self);
	_result_ = _tmp0_;
	_tmp1_ = _result_;
	g_strstrip (_tmp1_);
	result = _result_;
	return result;
}


void qetesh_http_request_Handle (QeteshHTTPRequest* self) {
	QeteshWebServerContext* _tmp0_ = NULL;
	QeteshErrorManager* _tmp1_ = NULL;
	gchar* line = NULL;
	GeeArrayList* headerLines = NULL;
	GeeArrayList* _tmp2_ = NULL;
	GeeArrayList* _tmp15_ = NULL;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_ServerContext;
	_tmp1_ = _tmp0_->Err;
	qetesh_error_manager_WriteMessage (_tmp1_, "HTTPRequest Handling Request...", QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_DEBUG, NULL);
	_tmp2_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	headerLines = _tmp2_;
	{
		while (TRUE) {
			gchar* _tmp3_ = NULL;
			GDataInputStream* _tmp4_ = NULL;
			gchar* _tmp5_ = NULL;
			const gchar* _tmp6_ = NULL;
			GeeArrayList* _tmp7_ = NULL;
			const gchar* _tmp8_ = NULL;
			const gchar* _tmp9_ = NULL;
			gchar* _tmp10_ = NULL;
			gchar* _tmp11_ = NULL;
			gboolean _tmp12_ = FALSE;
			_tmp4_ = self->priv->httpIn;
			_tmp5_ = g_data_input_stream_read_line (_tmp4_, NULL, NULL, &_inner_error_);
			_tmp3_ = _tmp5_;
			if (_inner_error_ != NULL) {
				goto __catch7_g_error;
			}
			_g_free0 (line);
			line = _tmp3_;
			_tmp6_ = line;
			if (!(_tmp6_ != NULL)) {
				break;
			}
			_tmp7_ = headerLines;
			_tmp8_ = line;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp7_, _tmp8_);
			_tmp9_ = line;
			_tmp10_ = string_strip (_tmp9_);
			_tmp11_ = _tmp10_;
			_tmp12_ = g_strcmp0 (_tmp11_, "") == 0;
			_g_free0 (_tmp11_);
			if (_tmp12_) {
				break;
			}
		}
	}
	goto __finally7;
	__catch7_g_error:
	{
		GError* e = NULL;
		QeteshWebServerContext* _tmp13_ = NULL;
		QeteshErrorManager* _tmp14_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp13_ = self->priv->_ServerContext;
		_tmp14_ = _tmp13_->Err;
		qetesh_error_manager_WriteMessage (_tmp14_, "Error reading input", QETESH_ERROR_MANAGER_QERROR_CLASS_QETESH_CRITICAL, NULL);
		_g_error_free0 (e);
		_g_object_unref0 (headerLines);
		_g_free0 (line);
		return;
	}
	__finally7:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (headerLines);
		_g_free0 (line);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp15_ = headerLines;
	qetesh_http_request_ReadHeaders (self, _tmp15_);
	_g_object_unref0 (headerLines);
	_g_free0 (line);
}


/**
 * Route the request to an application
 * 
 * Thread-global variables in Qetesh.ThreadContext are set
 * at this point, as well as application context.
 * 
**/
void qetesh_http_request_Route (QeteshHTTPRequest* self, QeteshWebAppContext* cxt, QeteshHTTPResponse* resp) {
	QeteshWebAppContext* _tmp0_ = NULL;
	QeteshHTTPResponse* _tmp1_ = NULL;
	QeteshWebServerContext* _tmp2_ = NULL;
	QeteshDataDBManager* _tmp3_ = NULL;
	QeteshDataDataManager* _tmp4_ = NULL;
	QeteshDataDataManager* _tmp5_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (cxt != NULL);
	g_return_if_fail (resp != NULL);
	_tmp0_ = cxt;
	qetesh_http_request_set_AppContext (self, _tmp0_);
	_tmp1_ = resp;
	qetesh_http_request_set_HResponse (self, _tmp1_);
	_tmp2_ = self->priv->_ServerContext;
	_tmp3_ = _tmp2_->Databases;
	_tmp4_ = qetesh_data_data_manager_new (_tmp3_);
	_tmp5_ = _tmp4_;
	qetesh_http_request_set_Data (self, _tmp5_);
	_g_object_unref0 (_tmp5_);
}


/**
 * Trigger a response
**/
void qetesh_http_request_Respond (QeteshHTTPRequest* self) {
	QeteshHTTPResponse* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_HResponse;
	if (_tmp0_ != NULL) {
		QeteshHTTPResponse* _tmp1_ = NULL;
		GDataOutputStream* _tmp2_ = NULL;
		_tmp1_ = self->priv->_HResponse;
		_tmp2_ = self->priv->httpOut;
		qetesh_http_response_Respond (_tmp1_, _tmp2_);
	}
}


QeteshWebServerContext* qetesh_http_request_get_ServerContext (QeteshHTTPRequest* self) {
	QeteshWebServerContext* result;
	QeteshWebServerContext* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_ServerContext;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_ServerContext (QeteshHTTPRequest* self, QeteshWebServerContext* value) {
	QeteshWebServerContext* _tmp0_ = NULL;
	QeteshWebServerContext* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_ServerContext);
	self->priv->_ServerContext = _tmp1_;
	g_object_notify ((GObject *) self, "ServerContext");
}


QeteshWebAppContext* qetesh_http_request_get_AppContext (QeteshHTTPRequest* self) {
	QeteshWebAppContext* result;
	QeteshWebAppContext* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_AppContext;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_AppContext (QeteshHTTPRequest* self, QeteshWebAppContext* value) {
	QeteshWebAppContext* _tmp0_ = NULL;
	QeteshWebAppContext* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_AppContext);
	self->priv->_AppContext = _tmp1_;
	g_object_notify ((GObject *) self, "AppContext");
}


QeteshDataDataManager* qetesh_http_request_get_Data (QeteshHTTPRequest* self) {
	QeteshDataDataManager* result;
	QeteshDataDataManager* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_Data;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_Data (QeteshHTTPRequest* self, QeteshDataDataManager* value) {
	QeteshDataDataManager* _tmp0_ = NULL;
	QeteshDataDataManager* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_Data);
	self->priv->_Data = _tmp1_;
	g_object_notify ((GObject *) self, "Data");
}


QeteshHTTPRequestRequestMethod qetesh_http_request_get_Method (QeteshHTTPRequest* self) {
	QeteshHTTPRequestRequestMethod result;
	QeteshHTTPRequestRequestMethod _tmp0_ = 0;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->_Method;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_Method (QeteshHTTPRequest* self, QeteshHTTPRequestRequestMethod value) {
	QeteshHTTPRequestRequestMethod _tmp0_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->priv->_Method = _tmp0_;
	g_object_notify ((GObject *) self, "Method");
}


const gchar* qetesh_http_request_get_FullPath (QeteshHTTPRequest* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_FullPath;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_FullPath (QeteshHTTPRequest* self, const gchar* value) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (self->priv->_FullPath);
	self->priv->_FullPath = _tmp1_;
	g_object_notify ((GObject *) self, "FullPath");
}


const gchar* qetesh_http_request_get_Path (QeteshHTTPRequest* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_Path;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_Path (QeteshHTTPRequest* self, const gchar* value) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (self->priv->_Path);
	self->priv->_Path = _tmp1_;
	g_object_notify ((GObject *) self, "Path");
}


guint16 qetesh_http_request_get_ServerRequestPort (QeteshHTTPRequest* self) {
	guint16 result;
	guint16 _tmp0_ = 0U;
	g_return_val_if_fail (self != NULL, 0U);
	_tmp0_ = self->priv->_ServerRequestPort;
	result = _tmp0_;
	return result;
}


void qetesh_http_request_set_ServerRequestPort (QeteshHTTPRequest* self, guint16 value) {
	guint16 _tmp0_ = 0U;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->priv->_ServerRequestPort = _tmp0_;
}


guint16 qetesh_http_request_get_RequestPort (QeteshHTTPRequest* self) {
	guint16 result;
	guint16 _tmp0_ = 0U;
	g_return_val_if_fail (self != NULL, 0U);
	_tmp0_ = self->priv->_RequestPort;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_RequestPort (QeteshHTTPRequest* self, guint16 value) {
	guint16 _tmp0_ = 0U;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->priv->_RequestPort = _tmp0_;
}


const gchar* qetesh_http_request_get_Host (QeteshHTTPRequest* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_Host;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_Host (QeteshHTTPRequest* self, const gchar* value) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (self->priv->_Host);
	self->priv->_Host = _tmp1_;
	g_object_notify ((GObject *) self, "Host");
}


const gchar* qetesh_http_request_get_UserAgent (QeteshHTTPRequest* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_UserAgent;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_UserAgent (QeteshHTTPRequest* self, const gchar* value) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (self->priv->_UserAgent);
	self->priv->_UserAgent = _tmp1_;
	g_object_notify ((GObject *) self, "UserAgent");
}


GeeMap* qetesh_http_request_get_Headers (QeteshHTTPRequest* self) {
	GeeMap* result;
	GeeMap* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_Headers;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_Headers (QeteshHTTPRequest* self, GeeMap* value) {
	GeeMap* _tmp0_ = NULL;
	GeeMap* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_Headers);
	self->priv->_Headers = _tmp1_;
	g_object_notify ((GObject *) self, "Headers");
}


QeteshHTTPResponse* qetesh_http_request_get_HResponse (QeteshHTTPRequest* self) {
	QeteshHTTPResponse* result;
	QeteshHTTPResponse* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_HResponse;
	result = _tmp0_;
	return result;
}


static void qetesh_http_request_set_HResponse (QeteshHTTPRequest* self, QeteshHTTPResponse* value) {
	QeteshHTTPResponse* _tmp0_ = NULL;
	QeteshHTTPResponse* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_HResponse);
	self->priv->_HResponse = _tmp1_;
	g_object_notify ((GObject *) self, "HResponse");
}


static void qetesh_http_request_class_init (QeteshHTTPRequestClass * klass) {
	qetesh_http_request_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (QeteshHTTPRequestPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_qetesh_http_request_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_qetesh_http_request_set_property;
	G_OBJECT_CLASS (klass)->finalize = qetesh_http_request_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_SERVER_CONTEXT, g_param_spec_object ("ServerContext", "ServerContext", "ServerContext", QETESH_TYPE_WEB_SERVER_CONTEXT, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_APP_CONTEXT, g_param_spec_object ("AppContext", "AppContext", "AppContext", QETESH_TYPE_WEB_APP_CONTEXT, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_DATA, g_param_spec_object ("Data", "Data", "Data", QETESH_DATA_TYPE_DATA_MANAGER, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_METHOD, g_param_spec_enum ("Method", "Method", "Method", QETESH_HTTP_REQUEST_TYPE_REQUEST_METHOD, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_FULL_PATH, g_param_spec_string ("FullPath", "FullPath", "FullPath", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_PATH, g_param_spec_string ("Path", "Path", "Path", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_HOST, g_param_spec_string ("Host", "Host", "Host", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_USER_AGENT, g_param_spec_string ("UserAgent", "UserAgent", "UserAgent", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_HEADERS, g_param_spec_object ("Headers", "Headers", "Headers", GEE_TYPE_MAP, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), QETESH_HTTP_REQUEST_HRESPONSE, g_param_spec_object ("HResponse", "HResponse", "HResponse", QETESH_TYPE_HTTP_RESPONSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void qetesh_http_request_instance_init (QeteshHTTPRequest * self) {
	self->priv = QETESH_HTTP_REQUEST_GET_PRIVATE (self);
}


static void qetesh_http_request_finalize (GObject* obj) {
	QeteshHTTPRequest * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequest);
	_g_object_unref0 (self->priv->conn);
	_g_object_unref0 (self->priv->httpIn);
	_g_object_unref0 (self->priv->httpOut);
	_g_object_unref0 (self->priv->_ServerContext);
	_g_object_unref0 (self->priv->_AppContext);
	_g_object_unref0 (self->priv->_Data);
	_g_free0 (self->priv->_FullPath);
	_g_free0 (self->priv->_Path);
	_g_free0 (self->priv->_Host);
	_g_free0 (self->priv->_UserAgent);
	_g_object_unref0 (self->priv->_Headers);
	_g_object_unref0 (self->priv->_HResponse);
	G_OBJECT_CLASS (qetesh_http_request_parent_class)->finalize (obj);
}


/**
* Represents a single HTTP request made to the server
* 
* Populates itself from raw request data
* Belongs firmly in one thread
* 
* This is the one class that moves all the way through the
* request pipeline and interacts on server, application and
* request levels.
* 
* Also serves as the main context object for the request
**/
GType qetesh_http_request_get_type (void) {
	static volatile gsize qetesh_http_request_type_id__volatile = 0;
	if (g_once_init_enter (&qetesh_http_request_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (QeteshHTTPRequestClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) qetesh_http_request_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (QeteshHTTPRequest), 0, (GInstanceInitFunc) qetesh_http_request_instance_init, NULL };
		GType qetesh_http_request_type_id;
		qetesh_http_request_type_id = g_type_register_static (G_TYPE_OBJECT, "QeteshHTTPRequest", &g_define_type_info, 0);
		g_once_init_leave (&qetesh_http_request_type_id__volatile, qetesh_http_request_type_id);
	}
	return qetesh_http_request_type_id__volatile;
}


static void _vala_qetesh_http_request_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	QeteshHTTPRequest * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequest);
	switch (property_id) {
		case QETESH_HTTP_REQUEST_SERVER_CONTEXT:
		g_value_set_object (value, qetesh_http_request_get_ServerContext (self));
		break;
		case QETESH_HTTP_REQUEST_APP_CONTEXT:
		g_value_set_object (value, qetesh_http_request_get_AppContext (self));
		break;
		case QETESH_HTTP_REQUEST_DATA:
		g_value_set_object (value, qetesh_http_request_get_Data (self));
		break;
		case QETESH_HTTP_REQUEST_METHOD:
		g_value_set_enum (value, qetesh_http_request_get_Method (self));
		break;
		case QETESH_HTTP_REQUEST_FULL_PATH:
		g_value_set_string (value, qetesh_http_request_get_FullPath (self));
		break;
		case QETESH_HTTP_REQUEST_PATH:
		g_value_set_string (value, qetesh_http_request_get_Path (self));
		break;
		case QETESH_HTTP_REQUEST_HOST:
		g_value_set_string (value, qetesh_http_request_get_Host (self));
		break;
		case QETESH_HTTP_REQUEST_USER_AGENT:
		g_value_set_string (value, qetesh_http_request_get_UserAgent (self));
		break;
		case QETESH_HTTP_REQUEST_HEADERS:
		g_value_set_object (value, qetesh_http_request_get_Headers (self));
		break;
		case QETESH_HTTP_REQUEST_HRESPONSE:
		g_value_set_object (value, qetesh_http_request_get_HResponse (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_qetesh_http_request_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	QeteshHTTPRequest * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, QETESH_TYPE_HTTP_REQUEST, QeteshHTTPRequest);
	switch (property_id) {
		case QETESH_HTTP_REQUEST_SERVER_CONTEXT:
		qetesh_http_request_set_ServerContext (self, g_value_get_object (value));
		break;
		case QETESH_HTTP_REQUEST_APP_CONTEXT:
		qetesh_http_request_set_AppContext (self, g_value_get_object (value));
		break;
		case QETESH_HTTP_REQUEST_DATA:
		qetesh_http_request_set_Data (self, g_value_get_object (value));
		break;
		case QETESH_HTTP_REQUEST_METHOD:
		qetesh_http_request_set_Method (self, g_value_get_enum (value));
		break;
		case QETESH_HTTP_REQUEST_FULL_PATH:
		qetesh_http_request_set_FullPath (self, g_value_get_string (value));
		break;
		case QETESH_HTTP_REQUEST_PATH:
		qetesh_http_request_set_Path (self, g_value_get_string (value));
		break;
		case QETESH_HTTP_REQUEST_HOST:
		qetesh_http_request_set_Host (self, g_value_get_string (value));
		break;
		case QETESH_HTTP_REQUEST_USER_AGENT:
		qetesh_http_request_set_UserAgent (self, g_value_get_string (value));
		break;
		case QETESH_HTTP_REQUEST_HEADERS:
		qetesh_http_request_set_Headers (self, g_value_get_object (value));
		break;
		case QETESH_HTTP_REQUEST_HRESPONSE:
		qetesh_http_request_set_HResponse (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



